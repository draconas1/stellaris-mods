la_has_funds = {
	resource_stockpile_compare = {
		resource = energy
		value >= 1
		mult = value:la_calculate_cost|BASE|la_energy|MULT|$MULT$|
	}
	resource_stockpile_compare = {
		resource = unity
		value >= 1
		mult = value:la_calculate_cost|BASE|la_unity|MULT|$MULT$|
	}
}

la_has_any_education_pick = {
	OR = {
		has_ascension_perk = ap_transcendent_learning
		has_tradition = tr_discovery_polytechnic_education
		has_policy_flag = leader_enhancement_capacity_boosters
	}
}

la_has_all_education_pick = {
	has_ascension_perk = ap_transcendent_learning
	OR = {		
		has_tradition = tr_discovery_polytechnic_education
		has_policy_flag = leader_enhancement_capacity_boosters
	}
}

la_has_detox_trait = {
	OR = {
		has_trait = la_commander_detox
		has_trait = la_scientist_detox
		has_trait = la_official_detox
		has_trait = la_ruler_detox
	}
}

# this = leader
la_is_valid_for_detox = {
    NOR = {
        has_leader_flag = renowned_leader
        has_leader_flag = legendary_leader
        is_leader_tier = leader_tier_renowned
        is_leader_tier = leader_tier_legendary
    }
    la_has_detox_trait = no
    num_negative_traits > 0
}

la_has_any_academy_building_at_all = {
	OR = {
		has_building = building_la_academy_1
		has_building = building_la_academy_2
		has_building = building_la_academy_3
		has_building = building_la_academy_4
		has_building = building_la_academy_5
	}
}

la_has_any_academy_building_1 = {
	OR = {
		has_active_building = building_la_academy_1
		has_active_building = building_la_academy_2
		has_active_building = building_la_academy_3
		has_active_building = building_la_academy_4
		has_active_building = building_la_academy_5
	}
}

la_has_any_academy_building_2 = {
	OR = {
		has_active_building = building_la_academy_2
		has_active_building = building_la_academy_3
		has_active_building = building_la_academy_4
		has_active_building = building_la_academy_5
	}
}

la_has_any_academy_building_3 = {
	OR = {
		has_active_building = building_la_academy_3
		has_active_building = building_la_academy_4
		has_active_building = building_la_academy_5
	}
}

la_has_any_academy_building_4 = {
	OR = {
		has_active_building = building_la_academy_4
		has_active_building = building_la_academy_5
	}
}

la_has_any_academy_building_5 = {
	has_active_building = building_la_academy_5
}

la_no_same_trait_twice = {
	custom_tooltip = {
		fail_text = leaderacademy.not.same.trait.twice
		NAND = {
			exists = event_target:la_in_progress_leader
			event_target:la_in_progress_leader = { has_trait = $TRAIT$ }
		}
	}
}

la_no_same_trait_twice_pot = {
    NAND = {
        exists = event_target:la_in_progress_leader
        event_target:la_in_progress_leader = { has_trait = $TRAIT$ }
    }
}


la_no_home_planet_traits = {
    custom_tooltip = {
        fail_text = leaderacademy.only.one.homeworld.trait
        exists = event_target:la_in_progress_leader
        event_target:la_in_progress_leader = {
            NOR = {
                has_trait = leader_trait_capitalist
                has_trait = leader_trait_private_mines
                has_trait = leader_trait_homesteader
                has_trait = leader_trait_scrapper
                has_trait = leader_trait_entrepreneur
                has_trait = leader_trait_venerated
            }
        }
    }
}

la_does_not_have_flag = {
	NAND = {
		exists = event_target:la_in_progress_leader
		event_target:la_in_progress_leader = { has_leader_flag = $FLAG$ }
	}
}

la_has_flag = {
    exists = event_target:la_in_progress_leader
    event_target:la_in_progress_leader = { has_leader_flag = $FLAG$ }
}

la_has_trait = {
    exists = event_target:la_in_progress_leader
    event_target:la_in_progress_leader = { has_trait = $TRAIT$ }
}

la_does_not_have_trait = {
    exists = event_target:la_in_progress_leader
    event_target:la_in_progress_leader = { NOT = { has_trait = $TRAIT$ } }
}

la_leader_trigger = {
    exists = event_target:la_in_progress_leader
    event_target:la_in_progress_leader = { $TRIGGER$ }
}

la_show_council_traits = {
	la_does_not_have_flag = { FLAG = block_council_traits }
}

#Checks whether this species is eligible to become rulers through elections
#Root = country
#This = species
la_can_generate_leader_from_species = {
    is_sapient = yes
    OR = {
        NAND = {
            NOT = { root = { has_technology = "tech_synthetic_leaders" } }
            has_trait = "trait_mechanical"
        }
        has_citizenship_type = { type = citizenship_full country = root }
    }
}

la_can_afford_enclave = {
    resource_stockpile_compare = {
        resource = unity
        value >= 10000
    }
    resource_stockpile_compare = {
        resource = influence
        value >= 100
    }
}

la_can_afford_paragon = {
    resource_stockpile_compare = {
        resource = unity
        value >= 50000
    }
    resource_stockpile_compare = {
        resource = influence
        value >= 250
    }
}

la_can_afford_legend = {
    resource_stockpile_compare = {
        resource = unity
        value >= 100000
    }
    resource_stockpile_compare = {
        resource = influence
        value >= 500
    }
    resource_stockpile_compare = {
        resource = energy
        value >= 40000
    }
}

la_can_recruit_cradle_paragon = {
    has_patron_relation = { patron = the_cradle_of_souls }
    has_covenant_with_the_composer_of_strands = no
    has_covenant_with_the_eater_of_worlds = no
    has_covenant_with_the_instrument_of_desire = no
    has_covenant_with_whisperers_in_the_void = no
    is_homicidal = no
}

la_can_recruit_eater_paragon = {
    has_patron_relation = { patron = the_eater_of_worlds }
    has_covenant_with_the_composer_of_strands = no
    has_covenant_with_the_cradle_of_souls = no
    has_covenant_with_the_instrument_of_desire = no
    has_covenant_with_whisperers_in_the_void = no
    NOT = { has_valid_civic = civic_hive_devouring_swarm }
}

la_can_recruit_instrument_paragon = {
    has_patron_relation = { patron = the_instrument_of_desire }
    has_covenant_with_the_composer_of_strands = no
    has_covenant_with_the_cradle_of_souls = no
    has_covenant_with_the_eater_of_worlds = no
    has_covenant_with_whisperers_in_the_void = no
    is_homicidal = no
}

la_can_recruit_composer_paragon = {
    has_patron_relation = { patron = the_composer_of_strands }
    has_covenant_with_the_instrument_of_desire = no
    has_covenant_with_the_cradle_of_souls = no
    has_covenant_with_the_eater_of_worlds = no
    has_covenant_with_whisperers_in_the_void = no
    is_homicidal = no
}

la_can_recruit_whispers_paragon = {
    has_patron_relation = { patron = whisperers_in_the_void }
    has_covenant_with_the_instrument_of_desire = no
    has_covenant_with_the_cradle_of_souls = no
    has_covenant_with_the_eater_of_worlds = no
    has_covenant_with_the_composer_of_strands = no
    is_homicidal = no
    is_gestalt = no
}