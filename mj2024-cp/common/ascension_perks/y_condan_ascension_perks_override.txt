# why y?  So that my other mods will have primacy if someone runs both.
# and if those people break the game by taking all the incompatible AP's, well its on them.

# Last synced against vanilla: 4.0.23

@ascension_path_base_weight = 100
@ascension_path_synergy_weight = 2
@ascension_path_anti_synergy_weight = 0.5

# This cares specifically about not being Condan, rather than just being a player crisis
# Synthetic Ascension (Machine Intelligence or Individualistic Machine)
ap_synthetic_age = {
    potential = {
        OR = {
            has_synthetic_dawn = yes
            has_machine_age_dlc = yes
        }
        OR = {
            is_machine_empire = yes
            is_individual_machine = yes
        }
        NOT = {
            has_ascension_perk = ap_synthetic_age
        }
        is_natural_design_empire = no
        NOT = { has_ascension_perk = ap_condan }
    }

    possible = {
        custom_tooltip = {
            fail_text = "requires_ascension_perks_2"
            num_ascension_perks > 1
        }
        custom_tooltip = {
            fail_text = "requires_not_ap_organo_machine_interfacing"
            NOT = { has_ascension_perk = ap_organo_machine_interfacing_assimilator }
        }
        if = {
            limit = { has_shroud_dlc = yes }
            custom_tooltip = {
                fail_text = "requires_not_ap_interdimensional_processing"
                has_psionic_ascension = no
            }
            NOT = { country_has_situation = { SITUATION = situation_shroud_forged } }
        }
        custom_tooltip = {
            fail_text = "requires_free_tradition_tree"
            num_tradition_categories < @max_tradition_trees
        }
    }

    custom_tooltip = "synthetic_age_tooltip"

    tradition_swap = {
        inherit_name = yes
        inherit_effects = no
        inherit_icon = yes
        trigger = {
            has_machine_age_dlc = yes
        }
        custom_tooltip = "synthetic_age_tooltip_machine_age"
        on_enabled = {
            hidden_effect = {
                country_event = { id = machine_age.4000 }
            }
        }

        weight = {
            factor = 1
        }
    }

    ai_weight = {
        factor = @ascension_path_base_weight
        modifier = {
            factor = @ascension_path_anti_synergy_weight
            has_synthetic_age_anti_synergy = yes
        }
    }
}