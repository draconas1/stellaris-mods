# condan_triggers.txt  Contingency Processing Core 1A6F
# Stellaris 2024 ModJam
# Contributors: Draconas

# any scope
condan_trigger = {
    host_has_dlc = "Synthetic Dawn Story Pack"
}


# country scope
condan_has_no_ap = {
    is_synthetic_empire = no
    NOR = {
        # Has Cybernetic Ascension
        has_ascension_perk = ap_the_flesh_is_weak
        has_ascension_perk = ap_organo_machine_interfacing
        # Has Genetic Ascension
        has_ascension_perk = ap_engineered_evolution
        # Has Psionic Ascension
        has_origin = origin_shroudwalker_apprentice
        has_ascension_perk = ap_mind_over_matter

        # synths
        has_ascension_perk = ap_synthetic_age
        has_ascension_perk = ap_synthetic_evolution
    }k
}

# country scope
condan_has_other_ascension_path = {
    is_synthetic_empire = no
    OR = {
        # Has Cybernetic Ascension
        has_ascension_perk = ap_the_flesh_is_weak
        has_ascension_perk = ap_organo_machine_interfacing
        # Has Genetic Ascension
        has_ascension_perk = ap_engineered_evolution
        # Has Psionic Ascension
        has_origin = origin_shroudwalker_apprentice
        has_ascension_perk = ap_mind_over_matter
    }
}

# country scope
condan_has_synth_ap_missing_tech = {
    is_synthetic_empire = no
    has_ascension_perk = ap_synthetic_evolution
    NOT = { has_technology = tech_synthetic_leaders}
}

# country scope
condan_has_synth_ap_missing_tradition = {
    is_synthetic_empire = no
    has_ascension_perk = ap_synthetic_evolution
    NOT = { has_tradition = tr_synthetics_synthetic_age}
}

# country scope
condan_has_synth_ap_no_project = {
    is_synthetic_empire = no
    has_ascension_perk = ap_synthetic_evolution
    has_tradition = tr_synthetics_synthetic_age
}

# country scope
condan_recruit_army_project = {
    resource_stockpile_compare = { resource = sr_living_metal value >= 300 }
    resource_stockpile_compare = { resource = alloys value >= 750 }
    resource_stockpile_compare = { resource = minerals value >= 1000 }
}

# scope condan country
condan_give_relic = {
    check_variable = { which = condan_power value > 5 }
}

#scope country that may own the world.
condan_owns_world = {
    exists = event_target:condan_planet
    event_target:condan_planet = {
        exists = owner
        owner =  { is_same_value = prevprev }
    }
}

#planet
condan_is_starter_colony = {
    OR = {
        has_building = building_colony_shelter
        has_building = building_deployment_post
    }
}

#planet
condan_is_wierd_planet = {
    OR = {
        has_building = building_resort_capital
        has_building = building_slave_capital
    }
}

#planet
condan_embezzlement_target = {
    condan_is_starter_colony = no
    condan_is_wierd_planet = no
}

# scope country
condan_unhappy = {
    exists = event_target:condan_country
    event_target:condan_country = { has_country_flag = condan_unhappy}
}

# country
condan_check_unhappy = {
    OR = {
        condan_unhappy = yes
        condan_has_other_ascension_path = yes
        has_crisis_level = crisis_level_4
    }
}

#country
likes_condan = {
    OR = {
        is_materialist = yes
        is_xenophobe = yes
        is_militarist = yes
    }
}

#country
really_likes_condan = {
    OR = {
        has_ethic = ethic_fanatic_materialist
        has_ethic = ethic_fanatic_xenophobe
        has_ethic = ethic_fanatic_militarist
    }
}

#country
dislikes_condan = {
    OR = {
        is_spiritualist = yes
        is_xenophile = yes
        is_pacifist = yes
    }
}

condan_is_non_terminator = {
    is_synthetic_empire = yes
    NOT = { has_civic = civic_machine_terminator }
}

# you made condan your leader, and then took crisis anyway
condan_is_player_very_naughty = {
    has_civic = civic_machine_terminator
    has_crisis_level = crisis_level_5
    ruler = { has_leader_flag = condan }
}