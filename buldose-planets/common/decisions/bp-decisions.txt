decision_bp_slave_colony = {
	owned_planets_only = yes
	prerequisites = {
		"tech_slave_colonies"
	}
	enactment_time = 5
	resources = {
		category = decisions
		cost = {
			unity = 1000
		}
	}
	potential = {
		is_capital = no
		NOT = { is_planet_class = pc_city }
		NOT = { has_modifier = resort_colony }
		NOT = { has_modifier = penal_colony }
		NOT = { has_modifier = slave_colony }
		owner = {
			is_regular_empire = yes
		}
		is_artificial = no
		NOT = { has_designation = col_nanotech_world }
		OR = {
			num_buildings = { type = any value > 2 }
			num_districts = { type = any value > 2 }
		}
	}
	allow = {
		custom_tooltip = {
			fail_text = decision_slave_colony_must_have_slave
			any_owned_pop_group = {
				has_citizenship_type = { type = citizenship_slavery country = owner }
			}
		}
	}
	effect = {
		custom_tooltip = decision_slave_colony_effects
		add_modifier = {
			modifier = slave_colony
			days = -1
		}
		hidden_effect = {
			export_trigger_value_to_variable = {
				trigger = num_districts
				parameters = {
					type = district_mining
				}
				variable = num_mining_districts
			}
			export_trigger_value_to_variable = {
				trigger = num_districts
				parameters = {
					type = district_farming
				}
				variable = num_farming_districts
			}
			export_trigger_value_to_variable = {
				trigger = num_districts
				parameters = {
					type = district_generator
				}
				variable = num_generator_districts
			}
			remove_all_buildings = yes
			remove_all_districts = yes
			add_building = building_slave_capital
			while = {
				count = num_mining_districts
				add_district = district_mining
			}
			while = {
				count = num_farming_districts
				add_district = district_farming
			}
			while = {
				count = num_generator_districts
				add_district = district_generator
			}
			validate_planet_buildings_and_districts = yes
		}
	}
	ai_weight = {
		weight = 0
	}
}

decision_bp_remove_buildings = {
	icon = decision_drilling_for_gas
	owned_planets_only = yes
	enactment_time = 5
	resources = {
		category = decisions
		cost = {
			unity = 5
		}
	}
	potential = {
		num_buildings = {
			type = any
			value > 1
		}
		NOR = {
			has_building = building_resort_capital
			has_building = building_resort_major_capital
			has_building = building_slave_capital
			has_building = building_slave_major_capital
		}
	}
	effect = {
		custom_tooltip = decision_bp_remove_building_effects
		bp_remove_buildings = yes
	}
	ai_weight = {
		weight = 0
	}
}

decision_bp_remove_districts = {
	icon = decision_drilling_for_gas
	owned_planets_only = yes
	enactment_time = 5
	resources = {
		category = decisions
		cost = {
			unity = 5
		}
	}
	potential = {
		num_districts = {
			type = any
			value > 1
		}
	}
	effect = {
		custom_tooltip = decision_bp_remove_districts_effects
		remove_all_districts = yes
	}
	ai_weight = {
		weight = 0
	}
}

decision_bp_build_colony = {
    icon = decision_resources
    owned_planets_only = yes
    potential = {
        owner = { is_ai = no }
        NOR = {
            has_modifier = resort_colony
            has_modifier = slave_colony
            uses_district_set = cosmogenesis_world
        }
        free_building_slots >= 1
        NOR = {
            has_building = building_fe_clinic_1
            has_building = building_clone_vats
            has_building = building_psi_corps
            has_building = building_genomic_facility
            has_building = building_augmentation_center
            has_building = building_robot_assembly_plant
        }
        owner = {
            is_regular_empire = yes
            OR = {
                has_technology = tech_basic_health
                has_technology = tech_cloning
                has_technology = tech_fe_clinic_1
                has_technology = tech_robotic_workers
                has_tradition = tr_psionics_shroud_psi_corps
                has_tradition = tr_psionics_psi_corps
                has_country_flag = genomic_research_facility_unlocked
                has_country_flag = augmentation_center_available
            }
        }
    }
    # can't change this.
    enactment_time = 360
    resources = {
        category = decisions
        cost = {
            minerals = 1
            mult = value:bp_cost_build_planet_minerals
        }
        cost = {
            trigger = { owner = { has_technology = tech_fe_clinic_1 } }
            alloys = 1
            mult = value:bp_cost_build_planet_alloys
        }
        cost = {
            trigger = { owner = { has_technology = tech_fe_clinic_1 } }
            sr_dark_matter = 1
            mult = value:bp_cost_build_planet_dark_matter
        }
    }
    effect = {
        if = {
            limit = { owner = { has_technology = tech_fe_clinic_1 } }
            inline_script = { script = bp-if-tech-build TECH = tech_fe_clinic_1 BUILDING = building_fe_clinic_1 }
        }
        else = {
            inline_script = { script = bp-if-tech-build TECH = tech_basic_health BUILDING = building_medical_1 }
        }
        inline_script = { script = bp-if-tech-build TECH = tech_cloning BUILDING = building_clone_vats }
        inline_script = { script = bp-if-tradition-build TRADITION_1 = tr_psionics_shroud_psi_corps TRADITION_2 = tr_psionics_psi_corps BUILDING = building_psi_corps }
        inline_script = { script = bp-if-flag-build FLAG = genomic_research_facility_unlocked BUILDING = building_genomic_facility }
        inline_script = { script = bp-if-flag-build FLAG = augmentation_center_available BUILDING = building_augmentation_center }
        inline_script = { script = bp-if-tech-build TECH = tech_robotic_workers BUILDING = building_robot_assembly_plant }
        hidden_effect = { validate_planet_buildings_and_districts = yes }
    }
    ai_weight = {
        weight = 0
    }
}



decision_bp_starbase_set_no_remove_flag = {
    icon = decision_deal
    potential = {
        bp_star_has_starbase_can_be_bulldozed = yes
        NOT = { solar_system = { has_star_flag = bp_save_starbase } }
    }
    effect = { solar_system = { set_star_flag = bp_save_starbase } }
    ai_weight = { weight = 0 }
}

decision_bp_starbase_remove_no_remove_flag = {
    icon = decision_deal
    potential = {
        bp_star_has_starbase_can_be_bulldozed = yes
        solar_system = { has_star_flag = bp_save_starbase }
    }
    effect = { solar_system = { remove_star_flag = bp_save_starbase } }
    ai_weight = { weight = 0 }
}


decision_bp_starbase_downgrade = {
    icon = decision_ruined_system
    resources = {
        category = decisions
        cost = { unity = 5 }
    }
    potential = { bp_star_has_starbase_can_be_bulldozed = yes }
    effect = { hidden_effect = { solar_system = { bp_downgrade_starbase = yes } } }
    ai_weight = { weight = 0 }
}

decision_bp_starbase_remove_modules = {
    icon = decision_satellite_in_orbit
    resources = {
        category = decisions
        cost = { unity = 5 }
    }
    potential = {
        bp_star_has_starbase_can_be_bulldozed = yes
        solar_system = { any_starbase_in_system = { count_starbase_modules = { count > 0 } } }
    }
    effect = {
        hidden_effect = {
            solar_system = {
                random_starbase_in_system = {
                    limit = { bp_is_big_starbase = yes }
                    remove_starbase_module = { slot = 1 }
                    remove_starbase_module = { slot = 2 }
                    remove_starbase_module = { slot = 3 }
                    remove_starbase_module = { slot = 4 }
                    remove_starbase_module = { slot = 5 }
                    remove_starbase_module = { slot = 6 }
                }
            }
        }
    }
    ai_weight = { weight = 0 }
}

decision_bp_starbase_remove_buildings = {
    icon = decision_satellite_in_orbit
    resources = {
        category = decisions
        cost = { unity = 5 }
    }
    potential = {
        bp_star_has_starbase_can_be_bulldozed = yes
        solar_system = { any_starbase_in_system = { count_starbase_buildings = { count > 0 } } }
    }
    effect = {
        hidden_effect = {
            solar_system = {
                random_starbase_in_system = {
                    limit = { bp_is_big_starbase = yes }
                    remove_starbase_building = { slot = all }
                }
            }
        }
    }
    ai_weight = { weight = 0 }
}


